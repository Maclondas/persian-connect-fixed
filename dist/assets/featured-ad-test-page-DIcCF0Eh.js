import{a0 as I,u as $,r as j,t as i,j as e,z as l,A as L,N as T,s as o,w as A,y as D,a1 as S,v as d,x as C,g as f,W as U,R as p,a2 as O,E as M}from"./index-CVXb9U9D.js";function W({onNavigate:r}){const{loading:m,isAuthenticated:w}=I(),{t:z}=$(),[y,h]=j.useState([]),[P,H]=j.useState(!1),[x,u]=j.useState(null);j.useEffect(()=>{!m&&w?b():!m&&!w&&(i.error("Please login to access the test page"),r("login"))},[m,w]);const b=()=>{const s=[{id:"test-1",title:"Test Car - BMW 320i",price:25e3,currency:"USD",images:["https://images.unsplash.com/photo-1555215695-3004980ad54e?w=400"],location:{city:"London",country:"UK"},category:"vehicles",status:"approved",featured:!1,views:42,createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString()},{id:"test-2",title:"Test Apartment - 2BR London",price:1800,currency:"USD",images:["https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400"],location:{city:"London",country:"UK"},category:"real-estate",status:"approved",featured:!1,views:28,createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString()},{id:"test-3",title:"Test Phone - iPhone 15 Pro",price:999,currency:"USD",images:["https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=400"],location:{city:"Paris",country:"France"},category:"digital-goods",status:"approved",featured:!0,featuredUntil:new Date(Date.now()+432e6).toISOString(),views:89,createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString()}];h(s),i.success("🧪 Test environment loaded with mock ads")},v=()=>{const s={id:`test-${Date.now()}`,title:`Test Ad - ${new Date().toLocaleTimeString()}`,price:Math.floor(Math.random()*1e4)+100,currency:"USD",images:["https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400"],location:{city:"Test City",country:"Test Country"},category:"services",status:"approved",featured:!1,views:Math.floor(Math.random()*100),createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString()};h(t=>[...t,s]),i.success("🆕 New test ad created!")},N=s=>s.featured&&s.featuredUntil&&new Date(s.featuredUntil)>new Date,k=s=>{if(!s.featured||!s.featuredUntil)return null;const t=new Date,a=new Date(s.featuredUntil);if(a<=t)return null;const c=a.getTime()-t.getTime(),g=Math.ceil(c/(1e3*60*60*24)),n=Math.ceil(c/(1e3*60*60)),B=Math.ceil(c/(1e3*60));return g>1?`${g} days remaining`:n>1?`${n} hours remaining`:`${B} minutes remaining`},R=async(s,t=10080)=>{try{u(s),console.log("🌟 Testing boost for ad:",s,"Duration:",t,"minutes");const a=new Date(Date.now()+t*60*1e3).toISOString();h(g=>g.map(n=>n.id===s?{...n,featured:!0,featuredUntil:a}:n));const c=t>1440?`${Math.round(t/1440)} days`:t>60?`${Math.round(t/60)} hours`:`${t} minutes`;i.success(`🌟 Test ad boosted! Duration: ${c}`)}catch(a){console.error("Failed to test boost ad:",a),i.error(`Failed to boost ad: ${a.message||"Unknown error"}`)}finally{u(null)}},E=async s=>{try{u(s),console.log("❌ Test unboost for ad:",s),h(t=>t.map(a=>a.id===s?{...a,featured:!1,featuredUntil:void 0}:a)),i.success("❌ Test ad featured status removed!")}catch(t){console.error("Failed to test unboost ad:",t),i.error(`Failed to unboost ad: ${t.message||"Unknown error"}`)}finally{u(null)}},F=[{label:"2 minutes",minutes:2},{label:"10 minutes",minutes:10},{label:"1 hour",minutes:60},{label:"6 hours",minutes:360},{label:"1 day",minutes:1440},{label:"7 days (normal)",minutes:10080}];return m?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>r("home"),children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Back to Home"]}),e.jsxs(l,{variant:"outline",size:"sm",onClick:()=>r("my-ads"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"My Ads (Real)"]})]}),e.jsxs(o,{children:[e.jsxs(A,{children:[e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(S,{className:"h-6 w-6 text-blue-600"}),"Featured Ads Testing Sandbox"]}),e.jsxs("p",{className:"text-gray-600",children:["🧪 ",e.jsx("strong",{children:"SAFE TEST ENVIRONMENT"})," - Test boost functionality without affecting real ads or making payments. This page uses mock data and doesn't connect to the real database."]})]}),e.jsxs(d,{children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-900",children:"Test Environment Active"})]}),e.jsxs("ul",{className:"text-sm text-green-800 space-y-1",children:[e.jsx("li",{children:"✅ No real ads will be affected"}),e.jsx("li",{children:"✅ No payments will be processed"}),e.jsx("li",{children:"✅ All changes are local/temporary"}),e.jsx("li",{children:"✅ Perfect for testing UI behavior"})]})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Testing Instructions"})]}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsx("li",{children:'• Use "Test Boost" buttons to mark ads as featured'}),e.jsx("li",{children:"• Choose different durations to test expiration behavior"}),e.jsx("li",{children:'• Use "Remove Featured" to instantly unboost ads'}),e.jsx("li",{children:'• Create new test ads with the "+" button'}),e.jsx("li",{children:"• Watch how buttons and badges change in real-time"})]})]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(o,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:"Test Ad Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(l,{onClick:v,size:"sm",className:"bg-blue-500 hover:bg-blue-600",children:[e.jsx(U,{className:"h-4 w-4 mr-1"}),"Add Test Ad"]}),e.jsxs(l,{onClick:b,variant:"outline",size:"sm",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),"Reset Test Data"]})]})]})})})}),y.length===0?e.jsx(o,{children:e.jsxs(d,{className:"text-center py-8",children:[e.jsx(S,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Test Ads"}),e.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Add Test Ad" to create some test ads for boost testing.'}),e.jsxs(l,{onClick:v,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Create Test Ad"]})]})}):e.jsx("div",{className:"space-y-4",children:y.map(s=>e.jsx(o,{className:"overflow-hidden",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[s.images&&s.images.length>0&&e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.images[0],alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-1",children:s.title}),e.jsxs("p",{className:"text-lg font-semibold text-primary",children:["$",s.price," ",s.currency]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.location.city,", ",s.location.country]})]}),e.jsx("div",{className:"text-right",children:e.jsx(O,{variant:s.status==="approved"?"default":"secondary",children:N(s)?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-3 w-3 mr-1 fill-yellow-500 text-yellow-500"}),"FEATURED"]}):s.status.toUpperCase()})})]}),N(s)&&e.jsxs("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(f,{className:"h-4 w-4 text-yellow-600 fill-current"}),e.jsx("span",{className:"font-semibold text-yellow-900",children:"Currently Featured"})]}),e.jsxs("p",{className:"text-sm text-yellow-800",children:[k(s)," • Expires: ",new Date(s.featuredUntil).toLocaleString()]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N(s)?e.jsxs(l,{size:"sm",variant:"outline",className:"text-red-600 border-red-200 hover:bg-red-50",onClick:()=>E(s.id),disabled:x===s.id,children:[x===s.id?e.jsx(p,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(M,{className:"h-4 w-4 mr-2"}),"Remove Featured"]}):e.jsx(e.Fragment,{children:F.map(t=>e.jsxs(l,{size:"sm",variant:t.minutes===10080?"default":"outline",className:t.minutes===10080?"bg-yellow-500 hover:bg-yellow-600":"",onClick:()=>R(s.id,t.minutes),disabled:x===s.id,children:[x===s.id?e.jsx(p,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(f,{className:"h-4 w-4 mr-2"}),t.label]},t.minutes))})})]})]})})},s.id))}),e.jsxs(o,{className:"mt-6",children:[e.jsx(A,{children:e.jsxs(D,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5 text-green-600"}),"What This Tests & How to Validate"]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"UI Behavior Testing:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:'Button text changes: "Boost $10" ↔ "Boosted"'})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:'Badge appearance: "FEATURED" with star icon'})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"Time countdown: Live remaining time display"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),e.jsx("span",{children:"Visual styling: Yellow featured highlights"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Real System Testing:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:'Go to "My Ads (Real)" to test actual boost payments'})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Check homepage for featured badge positioning"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Verify database persistence after refresh"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"}),e.jsx("span",{children:"Test expiration behavior with short durations"})]})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l,{variant:"outline",onClick:b,children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Reset Test Data"]}),e.jsxs(l,{variant:"outline",onClick:()=>r("my-ads"),children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Test Real System"]}),e.jsx(l,{variant:"outline",onClick:()=>r("home"),children:"Check Homepage"})]})})]})]})]})})}export{W as FeaturedAdTestPage};
