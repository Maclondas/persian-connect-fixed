import{r as o,a as f,t as l,j as e,s as y,w as h,x as g,y as p,v as j,g as b,C as w,z as m,H as N}from"./index-D8WoKyeA.js";import{R as u}from"./receipt-BkUaJWNB.js";function P({onNavigate:i}){const[v,x]=o.useState(null),[t,c]=o.useState(!0),d=o.useCallback(async n=>{try{const a=localStorage.getItem("paymentId"),r=localStorage.getItem("adId");if(!a||!r)throw new Error("Missing payment context");console.log("ðŸ” Verifying boost payment:",{sessionId:n,paymentId:a,adId:r});const s=await f.verifyPaymentSession(n,a,r);if(console.log("ðŸ“‹ Payment verification result:",s),s.verified)console.log("âœ… Boost payment verified successfully:",s),s.ad&&s.ad.featured?(console.log("ðŸŒŸ Ad successfully marked as featured:",{adId:s.ad.id,featured:s.ad.featured,featuredUntil:s.ad.featuredUntil}),l.success("ðŸŒŸ Your ad has been boosted successfully and is now featured!")):(console.warn("âš ï¸ Payment verified but ad not marked as featured:",s.ad),l.success("Payment processed successfully, but ad status may need manual verification.")),localStorage.removeItem("paymentId"),localStorage.removeItem("adId"),localStorage.removeItem("paymentSessionId"),localStorage.removeItem("completedPaymentSessionId");else throw console.error("âŒ Payment verification failed:",s),new Error(s.error||"Payment verification failed")}catch(a){console.error("Failed to verify boost payment:",a),l.error(`Failed to complete boost: ${a instanceof Error?a.message:"Unknown error"}`)}finally{c(!1)}},[]);return o.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("session_id"),r=localStorage.getItem("completedPaymentSessionId"),s=a||r;s?(x(s),d(s)):(c(!1),l.error("No payment session found"))},[d]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs(y,{className:"w-full max-w-md",children:[e.jsxs(h,{className:"text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:t?e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"}):e.jsx(g,{className:"h-8 w-8 text-green-600"})}),e.jsx(p,{className:"text-2xl text-green-600",children:t?"Processing Boost...":"Boost Successful!"})]}),e.jsxs(j,{className:"text-center space-y-4",children:[t?e.jsx("p",{className:"text-gray-600",children:"Please wait while we activate your ad boost..."}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-gray-600",children:["Your payment of ",e.jsx("strong",{children:"$10.00 USD"})," has been processed successfully."]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(b,{className:"h-5 w-5 text-yellow-500 mr-2"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"Ad Boosted!"})]}),e.jsx("p",{className:"text-sm text-blue-800",children:"Your ad is now featured and will appear at the top of search results for the next 7 days."})]}),e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(w,{className:"h-5 w-5 text-yellow-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-yellow-900",children:"Boost Duration"})]}),e.jsx("p",{className:"text-sm text-yellow-800",children:"Your featured status will automatically expire after 1 week. You can boost your ad again at any time."})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(u,{className:"h-5 w-5 text-gray-600 mr-2"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"What happens next?"})]}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"â€¢ Your ad appears at the top of category listings"}),e.jsx("li",{children:"â€¢ Increased visibility to potential buyers"}),e.jsx("li",{children:"â€¢ Featured badge on your ad"}),e.jsx("li",{children:"â€¢ Automatic expiration after 7 days"})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsxs(m,{onClick:()=>i("my-ads"),className:"flex-1",disabled:t,children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"My Ads"]}),e.jsxs(m,{variant:"outline",onClick:()=>i("home"),className:"flex-1",disabled:t,children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Home"]})]})]})]})})}export{P as BoostSuccessPage};
